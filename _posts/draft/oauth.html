<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 笔记</a>
<ul>
<li><a href="#sec-1-1">1.1. Roles</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1. resource owner</a></li>
<li><a href="#sec-1-1-2">1.1.2. resource server</a></li>
<li><a href="#sec-1-1-3">1.1.3. client</a></li>
<li><a href="#sec-1-1-4">1.1.4. authorization server</a></li>
</ul>
</li>
<li><a href="#sec-1-2">1.2. Protocol Flow</a></li>
</ul>
</li>
<li><a href="#sec-2">2. zhihu oauth example</a>
<ul>
<li><a href="#sec-2-1">2.1. 我想登录zhihu，但是没有知乎的账号，我希望使用qq登录，qq登录完成后要把我带回知乎</a></li>
<li><a href="#sec-2-2">2.2. 我在qq上完成登录</a></li>
</ul>
</li>
<li><a href="#sec-3">3. 参考资料</a></li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 笔记</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Roles</h3>
<div class="outline-text-3" id="text-1-1">
<p>
OAuth defines four roles:
</p>
</div>

<div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> resource owner</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
An entity capable of granting access to a protected resource.
When the resource owner is a person, it is referred to as an
end-user.
</p>
</div>
</div>

<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> resource server</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
The server hosting the protected resources, capable of accepting
and responding to protected resource requests using access tokens.
</p>
</div>
</div>

<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> client</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
An application making protected resource requests on behalf of the
resource owner and with its authorization.  The term "client" does
not imply any particular implementation characteristics (e.g.,
whether the application executes on a server, a desktop, or other
devices).
</p>
</div>
</div>

<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4"><span class="section-number-4">1.1.4</span> authorization server</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
The server issuing access tokens to the client after successfully
authenticating the resource owner and obtaining authorization.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Protocol Flow</h3>
<div class="outline-text-3" id="text-1-2">

<div class="figure">
<p><img src="oauth_protocol_flow.png" alt="oauth_protocol_flow.png" />
</p>
</div>
</div>
</div>
</div>



<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> zhihu oauth example</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 我想登录zhihu，但是没有知乎的账号，我希望使用qq登录，qq登录完成后要把我带回知乎</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>authorize<sub>url</sub>
     <a href="https://graph.qq.com/oauth/show?which=Login&display=pc&scope=get_user_info,get_info,add_t,add_pic_t,get_other_info,get_fanslist,get_idollist,add_idol,add_share&state=c99bfa32f6a63c70d14246d4042b43f9&redirect_uri=http://www.zhihu.com/oauth/callback/qqconn&response_type=code&client_id=100490701">https://graph.qq.com/oauth/show?which=Login&display=pc&scope=get_user_info,get_info,add_t,add_pic_t,get_other_info,get_fanslist,get_idollist,add_idol,add_share&state=c99bfa32f6a63c70d14246d4042b43f9&redirect_uri=http://www.zhihu.com/oauth/callback/qqconn&response_type=code&client_id=100490701</a>
</li>
<li>callback url
<a href="http://www.zhihu.com/oauth/redirect/login/qqconn?next=/oauth/account_callback">http://www.zhihu.com/oauth/redirect/login/qqconn?next=/oauth/account_callback</a>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 我在qq上完成登录</h3>
<div class="outline-text-3" id="text-2-2">
<p>
给知乎权限，重定向到
<a href="http://www.zhihu.com/oauth/callback/qqconn?code=CD4056078054031BDDD40F8C8A373C78&state=9afa13ecf340f82fa44f63a9c5457be2">http://www.zhihu.com/oauth/callback/qqconn?code=CD4056078054031BDDD40F8C8A373C78&state=9afa13ecf340f82fa44f63a9c5457be2</a>
可以看出，知乎拿到了code字段作为认证标识
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 参考资料</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="https://zh.wikipedia.org/zh-cn/OAuth">https://zh.wikipedia.org/zh-cn/OAuth</a>
<a href="http://www.barretlee.com/blog/2016/01/10/oauth2-introduce/">http://www.barretlee.com/blog/2016/01/10/oauth2-introduce/</a>
<a href="https://hueniverse.com/2015/09/19/auth-to-see-the-wizard-or-i-wrote-an-oauth-replacement/">https://hueniverse.com/2015/09/19/auth-to-see-the-wizard-or-i-wrote-an-oauth-replacement/</a>
</p>
</div>
</div>
